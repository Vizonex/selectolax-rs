use std::env;
use std::path::PathBuf;


fn compile_on_windows() {
    cc::Build::new()
        .file("src/lexbor/core/array.c")
        .file("src/lexbor/core/array_obj.c")
        .file("src/lexbor/core/avl.c")
        .file("src/lexbor/core/bst.c")
        .file("src/lexbor/core/bst_map.c")
        .file("src/lexbor/core/conv.c")
        .file("src/lexbor/core/diyfp.c")
        .file("src/lexbor/core/dobject.c")
        .file("src/lexbor/core/dtoa.c")
        .file("src/lexbor/core/hash.c")
        .file("src/lexbor/core/in.c")
        .file("src/lexbor/core/mem.c")
        .file("src/lexbor/core/mraw.c")
        .file("src/lexbor/core/plog.c")
        .file("src/lexbor/core/print.c")
        .file("src/lexbor/core/serialize.c")
        .file("src/lexbor/core/shs.c")
        .file("src/lexbor/core/str.c")
        .file("src/lexbor/core/strtod.c")
        .file("src/lexbor/core/utils.c")
        .file("src/lexbor/css/at_rule.c")
        .file("src/lexbor/css/css.c")
        .file("src/lexbor/css/declaration.c")
        .file("src/lexbor/css/log.c")
        .file("src/lexbor/css/parser.c")
        .file("src/lexbor/css/property.c")
        .file("src/lexbor/css/rule.c")
        .file("src/lexbor/css/state.c")
        .file("src/lexbor/css/stylesheet.c")
        .file("src/lexbor/css/unit.c")
        .file("src/lexbor/css/value.c")
        .file("src/lexbor/css/at_rule/state.c")
        .file("src/lexbor/css/property/state.c")
        .file("src/lexbor/css/selectors/pseudo.c")
        .file("src/lexbor/css/selectors/pseudo_state.c")
        .file("src/lexbor/css/selectors/selector.c")
        .file("src/lexbor/css/selectors/selectors.c")
        .file("src/lexbor/css/selectors/state.c")
        .file("src/lexbor/css/syntax/anb.c")
        .file("src/lexbor/css/syntax/parser.c")
        .file("src/lexbor/css/syntax/state.c")
        .file("src/lexbor/css/syntax/syntax.c")
        .file("src/lexbor/css/syntax/token.c")
        .file("src/lexbor/css/syntax/tokenizer.c")
        .file("src/lexbor/css/syntax/tokenizer/error.c")
        .file("src/lexbor/dom/collection.c")
        .file("src/lexbor/dom/exception.c")
        .file("src/lexbor/dom/interface.c")
        .file("src/lexbor/dom/interfaces/attr.c")
        .file("src/lexbor/dom/interfaces/cdata_section.c")
        .file("src/lexbor/dom/interfaces/character_data.c")
        .file("src/lexbor/dom/interfaces/comment.c")
        .file("src/lexbor/dom/interfaces/document.c")
        .file("src/lexbor/dom/interfaces/document_fragment.c")
        .file("src/lexbor/dom/interfaces/document_type.c")
        .file("src/lexbor/dom/interfaces/element.c")
        .file("src/lexbor/dom/interfaces/event_target.c")
        .file("src/lexbor/dom/interfaces/node.c")
        .file("src/lexbor/dom/interfaces/processing_instruction.c")
        .file("src/lexbor/dom/interfaces/shadow_root.c")
        .file("src/lexbor/dom/interfaces/text.c")
        .file("src/lexbor/encoding/big5.c")
        .file("src/lexbor/encoding/decode.c")
        .file("src/lexbor/encoding/encode.c")
        .file("src/lexbor/encoding/encoding.c")
        .file("src/lexbor/encoding/euc_kr.c")
        .file("src/lexbor/encoding/gb18030.c")
        .file("src/lexbor/encoding/iso_2022_jp_katakana.c")
        .file("src/lexbor/encoding/jis0208.c")
        .file("src/lexbor/encoding/jis0212.c")
        .file("src/lexbor/encoding/range.c")
        .file("src/lexbor/encoding/res.c")
        .file("src/lexbor/encoding/single.c")
        .file("src/lexbor/html/encoding.c")
        .file("src/lexbor/html/interface.c")
        .file("src/lexbor/html/node.c")
        .file("src/lexbor/html/parser.c")
        .file("src/lexbor/html/serialize.c")
        .file("src/lexbor/html/style.c")
        .file("src/lexbor/html/token.c")
        .file("src/lexbor/html/tokenizer.c")
        .file("src/lexbor/html/token_attr.c")
        .file("src/lexbor/html/tree.c")
        .file("src/lexbor/html/interfaces/anchor_element.c")
        .file("src/lexbor/html/interfaces/area_element.c")
        .file("src/lexbor/html/interfaces/audio_element.c")
        .file("src/lexbor/html/interfaces/base_element.c")
        .file("src/lexbor/html/interfaces/body_element.c")
        .file("src/lexbor/html/interfaces/br_element.c")
        .file("src/lexbor/html/interfaces/button_element.c")
        .file("src/lexbor/html/interfaces/canvas_element.c")
        .file("src/lexbor/html/interfaces/data_element.c")
        .file("src/lexbor/html/interfaces/data_list_element.c")
        .file("src/lexbor/html/interfaces/details_element.c")
        .file("src/lexbor/html/interfaces/dialog_element.c")
        .file("src/lexbor/html/interfaces/directory_element.c")
        .file("src/lexbor/html/interfaces/div_element.c")
        .file("src/lexbor/html/interfaces/document.c")
        .file("src/lexbor/html/interfaces/d_list_element.c")
        .file("src/lexbor/html/interfaces/element.c")
        .file("src/lexbor/html/interfaces/embed_element.c")
        .file("src/lexbor/html/interfaces/field_set_element.c")
        .file("src/lexbor/html/interfaces/font_element.c")
        .file("src/lexbor/html/interfaces/form_element.c")
        .file("src/lexbor/html/interfaces/frame_element.c")
        .file("src/lexbor/html/interfaces/frame_set_element.c")
        .file("src/lexbor/html/interfaces/heading_element.c")
        .file("src/lexbor/html/interfaces/head_element.c")
        .file("src/lexbor/html/interfaces/hr_element.c")
        .file("src/lexbor/html/interfaces/html_element.c")
        .file("src/lexbor/html/interfaces/iframe_element.c")
        .file("src/lexbor/html/interfaces/image_element.c")
        .file("src/lexbor/html/interfaces/input_element.c")
        .file("src/lexbor/html/interfaces/label_element.c")
        .file("src/lexbor/html/interfaces/legend_element.c")
        .file("src/lexbor/html/interfaces/link_element.c")
        .file("src/lexbor/html/interfaces/li_element.c")
        .file("src/lexbor/html/interfaces/map_element.c")
        .file("src/lexbor/html/interfaces/marquee_element.c")
        .file("src/lexbor/html/interfaces/media_element.c")
        .file("src/lexbor/html/interfaces/menu_element.c")
        .file("src/lexbor/html/interfaces/meta_element.c")
        .file("src/lexbor/html/interfaces/meter_element.c")
        .file("src/lexbor/html/interfaces/mod_element.c")
        .file("src/lexbor/html/interfaces/object_element.c")
        .file("src/lexbor/html/interfaces/option_element.c")
        .file("src/lexbor/html/interfaces/opt_group_element.c")
        .file("src/lexbor/html/interfaces/output_element.c")
        .file("src/lexbor/html/interfaces/o_list_element.c")
        .file("src/lexbor/html/interfaces/paragraph_element.c")
        .file("src/lexbor/html/interfaces/param_element.c")
        .file("src/lexbor/html/interfaces/picture_element.c")
        .file("src/lexbor/html/interfaces/pre_element.c")
        .file("src/lexbor/html/interfaces/progress_element.c")
        .file("src/lexbor/html/interfaces/quote_element.c")
        .file("src/lexbor/html/interfaces/script_element.c")
        .file("src/lexbor/html/interfaces/select_element.c")
        .file("src/lexbor/html/interfaces/slot_element.c")
        .file("src/lexbor/html/interfaces/source_element.c")
        .file("src/lexbor/html/interfaces/span_element.c")
        .file("src/lexbor/html/interfaces/style_element.c")
        .file("src/lexbor/html/interfaces/table_caption_element.c")
        .file("src/lexbor/html/interfaces/table_cell_element.c")
        .file("src/lexbor/html/interfaces/table_col_element.c")
        .file("src/lexbor/html/interfaces/table_element.c")
        .file("src/lexbor/html/interfaces/table_row_element.c")
        .file("src/lexbor/html/interfaces/table_section_element.c")
        .file("src/lexbor/html/interfaces/template_element.c")
        .file("src/lexbor/html/interfaces/text_area_element.c")
        .file("src/lexbor/html/interfaces/time_element.c")
        .file("src/lexbor/html/interfaces/title_element.c")
        .file("src/lexbor/html/interfaces/track_element.c")
        .file("src/lexbor/html/interfaces/unknown_element.c")
        .file("src/lexbor/html/interfaces/u_list_element.c")
        .file("src/lexbor/html/interfaces/video_element.c")
        .file("src/lexbor/html/interfaces/window.c")
        .file("src/lexbor/html/tokenizer/error.c")
        .file("src/lexbor/html/tokenizer/state.c")
        .file("src/lexbor/html/tokenizer/state_comment.c")
        .file("src/lexbor/html/tokenizer/state_doctype.c")
        .file("src/lexbor/html/tokenizer/state_rawtext.c")
        .file("src/lexbor/html/tokenizer/state_rcdata.c")
        .file("src/lexbor/html/tokenizer/state_script.c")
        .file("src/lexbor/html/tree/active_formatting.c")
        .file("src/lexbor/html/tree/error.c")
        .file("src/lexbor/html/tree/open_elements.c")
        .file("src/lexbor/html/tree/template_insertion.c")
        .file("src/lexbor/html/tree/insertion_mode/after_after_body.c")
        .file("src/lexbor/html/tree/insertion_mode/after_after_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/after_body.c")
        .file("src/lexbor/html/tree/insertion_mode/after_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/after_head.c")
        .file("src/lexbor/html/tree/insertion_mode/before_head.c")
        .file("src/lexbor/html/tree/insertion_mode/before_html.c")
        .file("src/lexbor/html/tree/insertion_mode/foreign_content.c")
        .file("src/lexbor/html/tree/insertion_mode/initial.c")
        .file("src/lexbor/html/tree/insertion_mode/in_body.c")
        .file("src/lexbor/html/tree/insertion_mode/in_caption.c")
        .file("src/lexbor/html/tree/insertion_mode/in_cell.c")
        .file("src/lexbor/html/tree/insertion_mode/in_column_group.c")
        .file("src/lexbor/html/tree/insertion_mode/in_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/in_head.c")
        .file("src/lexbor/html/tree/insertion_mode/in_head_noscript.c")
        .file("src/lexbor/html/tree/insertion_mode/in_row.c")
        .file("src/lexbor/html/tree/insertion_mode/in_select.c")
        .file("src/lexbor/html/tree/insertion_mode/in_select_in_table.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table_body.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table_text.c")
        .file("src/lexbor/html/tree/insertion_mode/in_template.c")
        .file("src/lexbor/html/tree/insertion_mode/text.c")
        .file("src/lexbor/ns/ns.c")
        .file("src/lexbor/ports/windows_nt/lexbor/core/fs.c")
        .file("src/lexbor/ports/windows_nt/lexbor/core/memory.c")
        .file("src/lexbor/ports/windows_nt/lexbor/core/perf.c")
        .file("src/lexbor/punycode/punycode.c")
        .file("src/lexbor/selectors/selectors.c")
        .file("src/lexbor/tag/tag.c")
        .file("src/lexbor/unicode/idna.c")
        .file("src/lexbor/unicode/unicode.c")
        .file("src/lexbor/url/url.c")
        .file("src/lexbor/utils/http.c")
        .file("src/lexbor/utils/warc.c")
        .include("includes")
        .flag("-DLEXBOR_BUILDING")
        .compile("lexbor_rs");

    /* Move our include files somewhere where our compiler will actually read them off and not piss off... */

    /* FINALIZE! */

    println!("cargo:include=/includes");
}


fn compile_on_unix() {
    cc::Build::new()
        .file("src/lexbor/core/array.c")
        .file("src/lexbor/core/array_obj.c")
        .file("src/lexbor/core/avl.c")
        .file("src/lexbor/core/bst.c")
        .file("src/lexbor/core/bst_map.c")
        .file("src/lexbor/core/conv.c")
        .file("src/lexbor/core/diyfp.c")
        .file("src/lexbor/core/dobject.c")
        .file("src/lexbor/core/dtoa.c")
        .file("src/lexbor/core/hash.c")
        .file("src/lexbor/core/in.c")
        .file("src/lexbor/core/mem.c")
        .file("src/lexbor/core/mraw.c")
        .file("src/lexbor/core/plog.c")
        .file("src/lexbor/core/print.c")
        .file("src/lexbor/core/serialize.c")
        .file("src/lexbor/core/shs.c")
        .file("src/lexbor/core/str.c")
        .file("src/lexbor/core/strtod.c")
        .file("src/lexbor/core/utils.c")
        .file("src/lexbor/css/at_rule.c")
        .file("src/lexbor/css/css.c")
        .file("src/lexbor/css/declaration.c")
        .file("src/lexbor/css/log.c")
        .file("src/lexbor/css/parser.c")
        .file("src/lexbor/css/property.c")
        .file("src/lexbor/css/rule.c")
        .file("src/lexbor/css/state.c")
        .file("src/lexbor/css/stylesheet.c")
        .file("src/lexbor/css/unit.c")
        .file("src/lexbor/css/value.c")
        .file("src/lexbor/css/at_rule/state.c")
        .file("src/lexbor/css/property/state.c")
        .file("src/lexbor/css/selectors/pseudo.c")
        .file("src/lexbor/css/selectors/pseudo_state.c")
        .file("src/lexbor/css/selectors/selector.c")
        .file("src/lexbor/css/selectors/selectors.c")
        .file("src/lexbor/css/selectors/state.c")
        .file("src/lexbor/css/syntax/anb.c")
        .file("src/lexbor/css/syntax/parser.c")
        .file("src/lexbor/css/syntax/state.c")
        .file("src/lexbor/css/syntax/syntax.c")
        .file("src/lexbor/css/syntax/token.c")
        .file("src/lexbor/css/syntax/tokenizer.c")
        .file("src/lexbor/css/syntax/tokenizer/error.c")
        .file("src/lexbor/dom/collection.c")
        .file("src/lexbor/dom/exception.c")
        .file("src/lexbor/dom/interface.c")
        .file("src/lexbor/dom/interfaces/attr.c")
        .file("src/lexbor/dom/interfaces/cdata_section.c")
        .file("src/lexbor/dom/interfaces/character_data.c")
        .file("src/lexbor/dom/interfaces/comment.c")
        .file("src/lexbor/dom/interfaces/document.c")
        .file("src/lexbor/dom/interfaces/document_fragment.c")
        .file("src/lexbor/dom/interfaces/document_type.c")
        .file("src/lexbor/dom/interfaces/element.c")
        .file("src/lexbor/dom/interfaces/event_target.c")
        .file("src/lexbor/dom/interfaces/node.c")
        .file("src/lexbor/dom/interfaces/processing_instruction.c")
        .file("src/lexbor/dom/interfaces/shadow_root.c")
        .file("src/lexbor/dom/interfaces/text.c")
        .file("src/lexbor/encoding/big5.c")
        .file("src/lexbor/encoding/decode.c")
        .file("src/lexbor/encoding/encode.c")
        .file("src/lexbor/encoding/encoding.c")
        .file("src/lexbor/encoding/euc_kr.c")
        .file("src/lexbor/encoding/gb18030.c")
        .file("src/lexbor/encoding/iso_2022_jp_katakana.c")
        .file("src/lexbor/encoding/jis0208.c")
        .file("src/lexbor/encoding/jis0212.c")
        .file("src/lexbor/encoding/range.c")
        .file("src/lexbor/encoding/res.c")
        .file("src/lexbor/encoding/single.c")
        .file("src/lexbor/html/encoding.c")
        .file("src/lexbor/html/interface.c")
        .file("src/lexbor/html/node.c")
        .file("src/lexbor/html/parser.c")
        .file("src/lexbor/html/serialize.c")
        .file("src/lexbor/html/style.c")
        .file("src/lexbor/html/token.c")
        .file("src/lexbor/html/tokenizer.c")
        .file("src/lexbor/html/token_attr.c")
        .file("src/lexbor/html/tree.c")
        .file("src/lexbor/html/interfaces/anchor_element.c")
        .file("src/lexbor/html/interfaces/area_element.c")
        .file("src/lexbor/html/interfaces/audio_element.c")
        .file("src/lexbor/html/interfaces/base_element.c")
        .file("src/lexbor/html/interfaces/body_element.c")
        .file("src/lexbor/html/interfaces/br_element.c")
        .file("src/lexbor/html/interfaces/button_element.c")
        .file("src/lexbor/html/interfaces/canvas_element.c")
        .file("src/lexbor/html/interfaces/data_element.c")
        .file("src/lexbor/html/interfaces/data_list_element.c")
        .file("src/lexbor/html/interfaces/details_element.c")
        .file("src/lexbor/html/interfaces/dialog_element.c")
        .file("src/lexbor/html/interfaces/directory_element.c")
        .file("src/lexbor/html/interfaces/div_element.c")
        .file("src/lexbor/html/interfaces/document.c")
        .file("src/lexbor/html/interfaces/d_list_element.c")
        .file("src/lexbor/html/interfaces/element.c")
        .file("src/lexbor/html/interfaces/embed_element.c")
        .file("src/lexbor/html/interfaces/field_set_element.c")
        .file("src/lexbor/html/interfaces/font_element.c")
        .file("src/lexbor/html/interfaces/form_element.c")
        .file("src/lexbor/html/interfaces/frame_element.c")
        .file("src/lexbor/html/interfaces/frame_set_element.c")
        .file("src/lexbor/html/interfaces/heading_element.c")
        .file("src/lexbor/html/interfaces/head_element.c")
        .file("src/lexbor/html/interfaces/hr_element.c")
        .file("src/lexbor/html/interfaces/html_element.c")
        .file("src/lexbor/html/interfaces/iframe_element.c")
        .file("src/lexbor/html/interfaces/image_element.c")
        .file("src/lexbor/html/interfaces/input_element.c")
        .file("src/lexbor/html/interfaces/label_element.c")
        .file("src/lexbor/html/interfaces/legend_element.c")
        .file("src/lexbor/html/interfaces/link_element.c")
        .file("src/lexbor/html/interfaces/li_element.c")
        .file("src/lexbor/html/interfaces/map_element.c")
        .file("src/lexbor/html/interfaces/marquee_element.c")
        .file("src/lexbor/html/interfaces/media_element.c")
        .file("src/lexbor/html/interfaces/menu_element.c")
        .file("src/lexbor/html/interfaces/meta_element.c")
        .file("src/lexbor/html/interfaces/meter_element.c")
        .file("src/lexbor/html/interfaces/mod_element.c")
        .file("src/lexbor/html/interfaces/object_element.c")
        .file("src/lexbor/html/interfaces/option_element.c")
        .file("src/lexbor/html/interfaces/opt_group_element.c")
        .file("src/lexbor/html/interfaces/output_element.c")
        .file("src/lexbor/html/interfaces/o_list_element.c")
        .file("src/lexbor/html/interfaces/paragraph_element.c")
        .file("src/lexbor/html/interfaces/param_element.c")
        .file("src/lexbor/html/interfaces/picture_element.c")
        .file("src/lexbor/html/interfaces/pre_element.c")
        .file("src/lexbor/html/interfaces/progress_element.c")
        .file("src/lexbor/html/interfaces/quote_element.c")
        .file("src/lexbor/html/interfaces/script_element.c")
        .file("src/lexbor/html/interfaces/select_element.c")
        .file("src/lexbor/html/interfaces/slot_element.c")
        .file("src/lexbor/html/interfaces/source_element.c")
        .file("src/lexbor/html/interfaces/span_element.c")
        .file("src/lexbor/html/interfaces/style_element.c")
        .file("src/lexbor/html/interfaces/table_caption_element.c")
        .file("src/lexbor/html/interfaces/table_cell_element.c")
        .file("src/lexbor/html/interfaces/table_col_element.c")
        .file("src/lexbor/html/interfaces/table_element.c")
        .file("src/lexbor/html/interfaces/table_row_element.c")
        .file("src/lexbor/html/interfaces/table_section_element.c")
        .file("src/lexbor/html/interfaces/template_element.c")
        .file("src/lexbor/html/interfaces/text_area_element.c")
        .file("src/lexbor/html/interfaces/time_element.c")
        .file("src/lexbor/html/interfaces/title_element.c")
        .file("src/lexbor/html/interfaces/track_element.c")
        .file("src/lexbor/html/interfaces/unknown_element.c")
        .file("src/lexbor/html/interfaces/u_list_element.c")
        .file("src/lexbor/html/interfaces/video_element.c")
        .file("src/lexbor/html/interfaces/window.c")
        .file("src/lexbor/html/tokenizer/error.c")
        .file("src/lexbor/html/tokenizer/state.c")
        .file("src/lexbor/html/tokenizer/state_comment.c")
        .file("src/lexbor/html/tokenizer/state_doctype.c")
        .file("src/lexbor/html/tokenizer/state_rawtext.c")
        .file("src/lexbor/html/tokenizer/state_rcdata.c")
        .file("src/lexbor/html/tokenizer/state_script.c")
        .file("src/lexbor/html/tree/active_formatting.c")
        .file("src/lexbor/html/tree/error.c")
        .file("src/lexbor/html/tree/open_elements.c")
        .file("src/lexbor/html/tree/template_insertion.c")
        .file("src/lexbor/html/tree/insertion_mode/after_after_body.c")
        .file("src/lexbor/html/tree/insertion_mode/after_after_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/after_body.c")
        .file("src/lexbor/html/tree/insertion_mode/after_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/after_head.c")
        .file("src/lexbor/html/tree/insertion_mode/before_head.c")
        .file("src/lexbor/html/tree/insertion_mode/before_html.c")
        .file("src/lexbor/html/tree/insertion_mode/foreign_content.c")
        .file("src/lexbor/html/tree/insertion_mode/initial.c")
        .file("src/lexbor/html/tree/insertion_mode/in_body.c")
        .file("src/lexbor/html/tree/insertion_mode/in_caption.c")
        .file("src/lexbor/html/tree/insertion_mode/in_cell.c")
        .file("src/lexbor/html/tree/insertion_mode/in_column_group.c")
        .file("src/lexbor/html/tree/insertion_mode/in_frameset.c")
        .file("src/lexbor/html/tree/insertion_mode/in_head.c")
        .file("src/lexbor/html/tree/insertion_mode/in_head_noscript.c")
        .file("src/lexbor/html/tree/insertion_mode/in_row.c")
        .file("src/lexbor/html/tree/insertion_mode/in_select.c")
        .file("src/lexbor/html/tree/insertion_mode/in_select_in_table.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table_body.c")
        .file("src/lexbor/html/tree/insertion_mode/in_table_text.c")
        .file("src/lexbor/html/tree/insertion_mode/in_template.c")
        .file("src/lexbor/html/tree/insertion_mode/text.c")
        .file("src/lexbor/ns/ns.c")
        .file("src/lexbor/ports/posix/lexbor/core/fs.c")
        .file("src/lexbor/ports/posix/lexbor/core/memory.c")
        .file("src/lexbor/ports/posix/lexbor/core/perf.c")
        .file("src/lexbor/punycode/punycode.c")
        .file("src/lexbor/selectors/selectors.c")
        .file("src/lexbor/tag/tag.c")
        .file("src/lexbor/unicode/idna.c")
        .file("src/lexbor/unicode/unicode.c")
        .file("src/lexbor/url/url.c")
        .file("src/lexbor/utils/http.c")
        .file("src/lexbor/utils/warc.c")
        .compile("lexbor_rs");

    /* Move our include files somewhere where our compiler will actually read them off and not piss off... */

    /* FINALIZE! */


}


fn main() {
    if cfg!(windows) {
        compile_on_windows();
    } else {
        compile_on_unix();
    }


    let inc_file = "src/bindings.h";
    let out_dir = PathBuf::from(env::var("OUT_DIR").unwrap());
    let out_file = out_dir.join("lexbor.rs");

    println!(
        "cargo:warning=generating raw lexbor binding file @ {} from {}",
        out_file.display(),
        inc_file
    );

    /* Compile bindings */
    let bindings = bindgen::Builder::default()
        .header(inc_file)
        .use_core()
        .ctypes_prefix("cty")
        .rust_target(bindgen::LATEST_STABLE_RUST)
        .derive_copy(true)
        .derive_debug(true)
        .derive_default(true)
        .derive_partialeq(true)
        .size_t_is_usize(true)
        .parse_callbacks(Box::new(bindgen::CargoCallbacks))
        .generate()
        .unwrap();

    
    bindings
        .write_to_file(out_dir.join("lexbor.rs"))
        // .expect("Couldn't write bindings!");
        .unwrap();

    // println!("cargo:include=includes/lexbor");
}
